<div class="stats-globales my-4 p-3 border rounded bg-light">
	<div
		class="row">
		<div class="col-md-4">
			<div class="card mb-3">
				<div class="card-header bg-primary text-white">Résumé des achats</div>
				<div class="card-body">
					<p>
						<strong>Nombre total d'articles :</strong>
						{{ statsGlobales.totalArticles }}</p>
					<p>
						<strong>Prix total :</strong>
						{{ statsGlobales.prixTotal|number_format(2, ',', ' ') }}
						€</p>
					<p>
						<strong>Prix moyen par article :</strong>
						{{ statsGlobales.moyennePrixArticle|number_format(2, ',', ' ') }}
						€</p>
				</div>
			</div>
		</div>

		<div class="col-md-4">
			<div class="card mb-3">
				<div class="card-header bg-warning text-white">Information d'article</div>
				<div class="card-body">
					{% if statsGlobales.articlePlusCher %}
						<p>
							<strong>Article le plus cher :</strong><br>
							{{ statsGlobales.articlePlusCher.nom }}
							-
							{{ statsGlobales.articlePlusCher.prix|number_format(2, ',', ' ') }}
							€</p>
					{% else %}
						<p>
							<strong>Article le plus cher :</strong>
							Aucun</p>
					{% endif %}

					{% if statsGlobales.articleMoinsCher %}
						<p>
							<strong>Article le moins cher :</strong><br>
							{{ statsGlobales.articleMoinsCher.nom }}
							-
							{{ statsGlobales.articleMoinsCher.prix|number_format(2, ',', ' ') }}
							€</p>
					{% else %}
						<p>
							<strong>Article le moins cher :</strong>
							Aucun</p>
					{% endif %}
				</div>
			</div>
		</div>

		<div class="col-md-4">
			<div class="card mb-3">
				<div class="card-header bg-secondary text-white">Articles les plus achetés</div>
				<div class="card-body">
					<ul class="list-group">
						{% for articleNom, quantite in statsGlobales.articlesLesPlusAchetes %}
							<li class="list-group-item d-flex justify-content-between align-items-center">
								{{ articleNom }}
								<span class="badge bg-primary rounded-pill">{{ quantite }}</span>
							</li>
						{% else %}
							<li class="list-group-item">Aucun article</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div class="row mt-3">
		<div class="col-12">
			<div class="card mb-3">
				<div class="card-header bg-success text-white">Répartition des dépenses par type d'article</div>
				<div class="card-body">
					{% if statsGlobales.depensesParType|length > 0 %}
						<div class="table-responsive">
							<table class="table table-striped">
								<thead>
									<tr>
										<th>Type</th>
										<th>Montant</th>
										<th>Pourcentage</th>
										<th>Représentation</th>
									</tr>
								</thead>
								<tbody>
									{% for typeNom, data in statsGlobales.depensesParType %}
										<tr>
											<td>{{ typeNom }}</td>
											<td>{{ data.montant|number_format(2, ',', ' ') }}
												€</td>
											<td>{{ data.pourcentage|number_format(1, ',', ' ') }}%</td>
											<td style="width: 40%">
												<div class="progress">
													<div class="progress-bar bg-success" role="progressbar" style="width: {{ data.pourcentage }}%;">
														{{ data.pourcentage|number_format(1) }}%
													</div>
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					{% else %}
						<p class="text-center">Aucune donnée disponible sur les types d'articles</p>
					{% endif %}
				</div>
			</div>
		</div>
	</div>
</div>
